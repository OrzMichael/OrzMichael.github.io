<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[InterfaceDoc]]></title>
      <url>http://kippies.cn/2016/11/13/InterfaceDoc/</url>
      <content type="html"><![CDATA[<h1 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h1><h2 id="è¯·æ±‚åœ°å€"><a href="#è¯·æ±‚åœ°å€" class="headerlink" title="è¯·æ±‚åœ°å€"></a>è¯·æ±‚åœ°å€</h2><blockquote>
<p>base url =ï¼Ÿ</p>
</blockquote>
<a id="more"></a>
<h2 id="Headerã€UA"><a href="#Headerã€UA" class="headerlink" title="Headerã€UA"></a>Headerã€UA</h2><blockquote>
<p>encode : UTF-8;<br>UA: eg. appName + versionName + os + osVersion + versionCode + manufacturer + module<br>å‚æ•°åœ¨æ‹¿ä¸åˆ°çš„æƒ…å†µä¸‹ä¼  Unknown</p>
</blockquote>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th style="text-align:center">ç±»å‹</th>
<th style="text-align:right">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>x-user-id</td>
<td style="text-align:center">string</td>
<td style="text-align:right">ç”¨æˆ·ID</td>
</tr>
<tr>
<td>x-version-name</td>
<td style="text-align:center">string</td>
<td style="text-align:right">Appç‰ˆæœ¬åç§° eg. 1.0.0</td>
</tr>
<tr>
<td>x-version-code</td>
<td style="text-align:center">string</td>
<td style="text-align:right">Appç‰ˆæœ¬å· eg. 666</td>
</tr>
<tr>
<td>x-channel</td>
<td style="text-align:center">string</td>
<td style="text-align:right">æ¸ é“å· eg. xiaomi</td>
</tr>
<tr>
<td>x-manufacturer</td>
<td style="text-align:center">string</td>
<td style="text-align:right">è®¾å¤‡å‚å•† eg. åä¸º</td>
</tr>
<tr>
<td>x-model</td>
<td style="text-align:center">string</td>
<td style="text-align:right">è®¾å¤‡å‹å· eg. Meta8</td>
</tr>
<tr>
<td>x-os</td>
<td style="text-align:center">string</td>
<td style="text-align:right">ç³»ç»Ÿç±»å‹ eg. iOS</td>
</tr>
<tr>
<td>x-os-version</td>
<td style="text-align:center">string</td>
<td style="text-align:right">ç³»ç»Ÿç‰ˆæœ¬å· eg. 5.1</td>
</tr>
<tr>
<td>x-screen-height</td>
<td style="text-align:center">string</td>
<td style="text-align:right">å±å¹•é«˜åº¦ eg. 1920</td>
</tr>
<tr>
<td>x-screen-width</td>
<td style="text-align:center">string</td>
<td style="text-align:right">å±å¹•å®½åº¦ eg. 1080</td>
</tr>
<tr>
<td>x-app-timezone</td>
<td style="text-align:center">string</td>
<td style="text-align:right">æ—¶åŒº eg. Asia/Shanghai</td>
</tr>
<tr>
<td>User-Agent</td>
<td style="text-align:center">string</td>
<td style="text-align:right">UA</td>
</tr>
</tbody>
</table>
<h2 id="åŸºæœ¬æ•°æ®æ ¼å¼"><a href="#åŸºæœ¬æ•°æ®æ ¼å¼" class="headerlink" title="åŸºæœ¬æ•°æ®æ ¼å¼"></a>åŸºæœ¬æ•°æ®æ ¼å¼</h2><blockquote>
<p>ec: çŠ¶æ€ç ï¼Œé200ï¼Œå…¨éƒ¨è®¤ä¸ºæ˜¯å¤±è´¥ï¼Œä¼šå¤„ç†ç‰¹å®šçš„é”™è¯¯ç  eg. 10001 : token å¤±æ•ˆï¼›<br>em: æç¤ºä¿¡æ¯ï¼›<br>å®¢æˆ·ç«¯ä¼šä¼˜å…ˆå¤„ç†emï¼Œå½“emæœ‰å†…å®¹æ—¶ï¼Œä¸å¯¹ecåšå¤„ç†ï¼›<br>dataï¼šobj{} æˆ–è€… arr[]ï¼›</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> <span class="string">"ec"</span>: <span class="number">200</span>,</span><br><span class="line"> <span class="string">"em"</span>: <span class="string">""</span>,</span><br><span class="line"> <span class="string">"data"</span>: &#123;&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><blockquote>
<p>POST /login</p>
</blockquote>
<h3 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"userName"</span>:<span class="string">"a88dfa9v61ns2"</span>,</span><br><span class="line">  <span class="string">"psw"</span>:<span class="string">"a893l1jf3076c"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"> <span class="string">"ec"</span>: <span class="number">200</span>,</span><br><span class="line"> <span class="string">"em"</span>: <span class="string">"success"</span>,</span><br><span class="line"> <span class="string">"data"</span>: &#123;</span><br><span class="line">	  <span class="string">"userId"</span>:<span class="string">"a88dfa9v61ns2"</span>,</span><br><span class="line">	  <span class="string">"nickName"</span>:<span class="string">"å–·å¡”Q"</span>,</span><br><span class="line">	  <span class="string">"avatar"</span>:<span class="string">"https://7niu.ab.com/a8888.png"</span>,</span><br><span class="line">	  <span class="string">"mobile"</span>:<span class="string">"18866668888"</span>,</span><br><span class="line">	  <span class="string">"gender"</span>:<span class="string">"M/F"</span></span><br><span class="line">	  <span class="string">"token"</span>:<span class="string">"fdljlRldkJjlskjdfls"</span>,  <span class="comment">// è°ƒç”¨ä¸€æ¬¡ç™»å½•æ¥å£ï¼Œé‡æ–°ç”Ÿæˆtoken</span></span><br><span class="line"> &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Androidä½¿ç”¨Google Breakpadè¿›è¡Œå´©æºƒæ—¥å¿—ç®¡ç†]]></title>
      <url>http://kippies.cn/2016/07/10/Android%E4%BD%BF%E7%94%A8Google-Breakpad%E8%BF%9B%E8%A1%8C%E5%B4%A9%E6%BA%83%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<ul>
<li>å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ€æ‹…å¿ƒçš„é—®é¢˜å°±æ˜¯ç¨‹åºå´©æºƒï¼Œè€Œä¸”è¿˜ä¸çŸ¥é“å´©æºƒçš„åŸå› ï¼Œç°åœ¨ä½¿ç”¨Google Breakpadæ¥è·Ÿè¸ªå´©æºƒçš„ä½ç½®ï¼Œéå¸¸æ–¹ä¾¿ï¼›ç”±äºç›®å‰ä½¿ç”¨Macç³»ç»Ÿå¼€å‘ï¼ŒGoogle Breadpadå¤„ç†Androidå´©æºƒæ—¥å¿—æ—¶éœ€è¦Linuxç¯å¢ƒï¼Œå€ŸåŠ© vagrant å¯ä»¥éå¸¸æ–¹ä¾¿åœ°åœ¨Macä½¿ç”¨Ubuntuç¯å¢ƒã€‚</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ varant ssh</span><br><span class="line">$ cd /vagrant</span><br><span class="line">$ sudo apt-get update</span><br><span class="line">$ sudo apt-get install build-essential</span><br><span class="line">$ svn checkout http:<span class="comment">//google-breakpad.googlecode.com/svn/trunk/ google-breakpad-read-only</span></span><br><span class="line">$ cd google-breakpad-read-only</span><br><span class="line">$ ./configure</span><br><span class="line">$ make</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤å°†ä¼šåœ¨<code>google-breakpad-read-only/src/processor</code>ç›®å½•ä¸‹ç”Ÿæˆ<code>minidump_stackwalk</code>å·¥å…·ï¼Œç”¨äºå¯¼å‡ºcrash log.<br><code>google-breakpad-read-only/src/tools/linux/dump_syms</code>ç›®å½•ä¸‹ç”Ÿæˆ dump_symså·¥å…·ï¼Œç”¨äºå¯¼å‡ºç¬¦å·æ–‡ä»¶ã€‚<br><code>google-breakpad-read-only/src/client/linux</code> ç›®å½•ä¸‹ç”Ÿæˆ libbreakpad_client.aã€‚</p>
<a id="more"></a>
<ul>
<li>å¦‚æœç¼–è¯‘é‡åˆ° <code>â€œcc1plus: warnings being treated as errorsâ€œ</code>é”™è¯¯ï¼Œè¯·å°†<code>google-breakpad-read-only/Makefile</code>æ–‡ä»¶ä¸­<code>&quot;* -Werror* &quot;</code>åˆ é™¤ï¼Œé‡æ–°ç¼–è¯‘ã€‚</li>
<li>å¦‚æœmakeçš„æ—¶å€™é‡åˆ° â€œ/lib64/libc.so.6: version `GLIBC_2.14â€™ not found â€œé”™è¯¯ï¼Œè¯´æ˜ glibc æ²¡æœ‰å®‰è£…ï¼Œå®‰è£…æ–¹æ³•è¯·ç§»æ­¥ï¼š<a href="http://my.oschina.net/zhangxu0512/blog/262275" target="_blank" rel="external">http://my.oschina.net/zhangxu0512/blog/262275</a></li>
</ul>
<h4 id="é›†æˆ-google-breakpadåˆ°Androidé¡¹ç›®ä¸­"><a href="#é›†æˆ-google-breakpadåˆ°Androidé¡¹ç›®ä¸­" class="headerlink" title="é›†æˆ google-breakpadåˆ°Androidé¡¹ç›®ä¸­"></a>é›†æˆ google-breakpadåˆ°Androidé¡¹ç›®ä¸­</h4><h5 id="æ·»åŠ google-beakpadä»£ç ï¼š"><a href="#æ·»åŠ google-beakpadä»£ç ï¼š" class="headerlink" title="æ·»åŠ google-beakpadä»£ç ï¼š"></a>æ·»åŠ google-beakpadä»£ç ï¼š</h5><ul>
<li><p>æ–¹æ³•ä¸€ï¼š</p>
<ul>
<li>æ‹·è´ <code>libbreakpad_client.a</code> åˆ° jni ç›®å½•ä¸‹ã€‚</li>
<li>æ‰“å¼€androidé¡¹ç›®çš„ Android.mkæ–‡ä»¶ï¼Œåœ¨ LOCAL_PATH := $(call my-dir) ä¸‹åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</li>
</ul>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">include $(CLEAR_VARS)  </span><br><span class="line">LOCAL_MODULE := breakpad_client  </span><br><span class="line">LOCAL_MODULE_FILENAME := breakpad_client  </span><br><span class="line">LOCAL_SRC_FILES := libbreakpad_client.a  </span><br><span class="line">include $(PREBUILT_STATIC_LIBRARY)</span><br></pre></td></tr></table></figure>
<ul>
<li>æ–¹æ³•äºŒï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(call <span class="keyword">import</span>-<span class="keyword">module</span>,google-breakpad-read-only/android/google_breakpad)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>æ–¹æ³•ä¸‰ï¼š </p>
<ul>
<li>å°† google-breakpad æºä»£ç é‡Œé¢çš„srcæ–‡ä»¶å¤¹æ‹·è´åˆ°é¡¹ç›®çš„jniç›®å½•ä¸‹ï¼›</li>
<li><p>ä¿®æ”¹Android.mkæ–‡ä»¶ï¼š</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">    LOCAL_PATH := $(call my-dir)</span><br><span class="line">	include $(CLEAR_VARS)</span><br><span class="line">	LOCAL_MODULE := breakpad_client</span><br><span class="line">	LOCAL_CPP_EXTENSION := .cc .cpp</span><br><span class="line">	LOCAL_ARM_MODE := arm</span><br><span class="line">	LOCAL_SRC_FILES := \</span><br><span class="line">    main.cpp \</span><br><span class="line">    src/client/linux/crash_generation/crash_generation_client.cc \</span><br><span class="line">    src/client/linux/handler/exception_handler.cc \</span><br><span class="line">    src/client/linux/handler/minidump_descriptor.cc \</span><br><span class="line">    src/client/linux/<span class="built_in">log</span>/<span class="built_in">log</span>.cc \</span><br><span class="line">    src/client/linux/minidump_writer/linux_dumper.cc \</span><br><span class="line">    src/client/linux/minidump_writer/linux_ptrace_dumper.cc \</span><br><span class="line">    src/client/linux/minidump_writer/minidump_writer.cc \</span><br><span class="line">    src/client/linux/microdump_writer/microdump_writer.cc \</span><br><span class="line">    src/client/linux/dump_writer_common/ucontext_reader.cc \</span><br><span class="line">    src/client/linux/dump_writer_common/seccomp_unwinder.cc \</span><br><span class="line">    src/client/linux/dump_writer_common/thread_info.cc \</span><br><span class="line">    src/client/minidump_file_writer.cc \</span><br><span class="line">    src/common/android/breakpad_getcontext.S \</span><br><span class="line">    src/common/convert_UTF.c \</span><br><span class="line">    src/common/md5.cc \</span><br><span class="line">    src/common/string_conversion.cc \</span><br><span class="line">    src/common/linux/elfutils.cc \</span><br><span class="line">    src/common/linux/file_id.cc \</span><br><span class="line">    src/common/linux/guid_creator.cc \</span><br><span class="line">    src/common/linux/linux_libc_support.cc \</span><br><span class="line">    src/common/linux/memory_mapped_file.cc \</span><br><span class="line">    src/common/linux/safe_readlink.cc</span><br><span class="line">LOCAL_C_INCLUDES        := $(LOCAL_PATH)/src/common/android/include \</span><br><span class="line">                           $(LOCAL_PATH)/src                        </span><br><span class="line">LOCAL_C_INCLUDES += $(NDK_ROOT)/sources/cxx-stl/stlport/stlport</span><br><span class="line">LOCAL_EXPORT_C_INCLUDES := $(LOCAL_C_INCLUDES)</span><br><span class="line">LOCAL_EXPORT_LDLIBS     := -llog</span><br><span class="line">LOCAL_LDLIBS    := -llog</span><br><span class="line">LOCAL_LDLIBS += $(NDK_ROOT)/sources/cxx-stl/stlport/libs/armeabi/libstlport_static.a</span><br><span class="line">include $(BUILD_SHARED_LIBRARY)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h5 id="åŠ å…¥å¯¹googole-breakpadçš„å¼•ç”¨ï¼š"><a href="#åŠ å…¥å¯¹googole-breakpadçš„å¼•ç”¨ï¼š" class="headerlink" title="åŠ å…¥å¯¹googole-breakpadçš„å¼•ç”¨ï¼š"></a>åŠ å…¥å¯¹googole-breakpadçš„å¼•ç”¨ï¼š</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOCAL_WHOLE_STATIC_LIBRARIES += breakpad_client</span><br></pre></td></tr></table></figure>
<h5 id="åŒ…å«æœç´¢è·¯å¾„ï¼š"><a href="#åŒ…å«æœç´¢è·¯å¾„ï¼š" class="headerlink" title="åŒ…å«æœç´¢è·¯å¾„ï¼š"></a>åŒ…å«æœç´¢è·¯å¾„ï¼š</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$GOOGLE_BREAKPAD_PATH/src  </span><br><span class="line">$GOOGLE_BREAKPAD_PATH/src/common/android/include</span><br></pre></td></tr></table></figure>
<hr>
<pre><code>æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰ç§é›†æˆæ–¹æ³•ã€‚
</code></pre><h4 id="æ·»åŠ google-breakpad-çš„-c-ä»£ç ï¼š"><a href="#æ·»åŠ google-breakpad-çš„-c-ä»£ç ï¼š" class="headerlink" title="æ·»åŠ google breakpad çš„ c++ä»£ç ï¼š"></a>æ·»åŠ google breakpad çš„ c++ä»£ç ï¼š</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;jni.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span>   </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">"com_test_crash_TestCrash.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">"client/linux/handler/exception_handler.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">"client/linux/handler/minidump_descriptor.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="string">"log.h"</span></span></span><br><span class="line"></span><br><span class="line">google_breakpad::ExceptionHandler* exceptionHandler;</span><br><span class="line"></span><br><span class="line">JavaVM *jvm = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onNativeCrash</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span>* info)</span> </span>&#123;</span><br><span class="line">    JNIEnv *env = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> result = jvm-&gt;GetEnv((void **) &amp;env, JNI_VERSION_1_6);</span><br><span class="line">    <span class="keyword">if</span> (result != JNI_OK) &#123;</span><br><span class="line">        LOGE(<span class="string">"%s"</span>, <span class="string">"jvm-&gt;GetEnv null"</span>);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    jclass crashPinClass = env-&gt;FindClass(</span><br><span class="line">            <span class="string">"com/test/crash/TestCrash"</span>);</span><br><span class="line">    <span class="keyword">if</span> (crashPinClass == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        LOGE(<span class="string">"%s"</span>, <span class="string">"FindClass com/test/crash/TestCrash null"</span>);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    jmethodID crashReportMethod = env-&gt;GetStaticMethodID(crashPinClass,</span><br><span class="line">            <span class="string">"onNativeCrash"</span>, <span class="string">"(Ljava/lang/String;)V"</span>);</span><br><span class="line">    <span class="keyword">if</span> (crashReportMethod == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        LOGE(<span class="string">"%s"</span>, <span class="string">"GetMethod onNativeCrash null"</span>);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    jstring crashInfo = env-&gt;NewStringUTF(info);</span><br><span class="line">    env-&gt;CallStaticVoidMethod(crashPinClass, crashReportMethod, crashInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å´©æºƒå›è°ƒ</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DumpCallback</span><span class="params">(<span class="keyword">const</span> google_breakpad::MinidumpDescriptor&amp; descriptor,</span><br><span class="line">        <span class="keyword">void</span>* context, <span class="keyword">bool</span> succeeded)</span> </span>&#123;</span><br><span class="line">    LOGE(<span class="string">"Dump path: %s\n"</span>, descriptor.path());</span><br><span class="line">    onNativeCrash(<span class="string">""</span>);</span><br><span class="line">    return succeeded;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span> <span class="function">jint <span class="title">JNI_OnLoad</span><span class="params">(JavaVM *vm, <span class="keyword">void</span>* <span class="comment">/*reserved*/</span>)</span> </span>&#123;</span><br><span class="line">    LOGE(<span class="string">"JNI_OnLoad"</span>);</span><br><span class="line">    jvm = vm;</span><br><span class="line">    return JNI_VERSION_1_6;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">"C"</span> &#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡javaä»£ç è°ƒç”¨initial()æ–¹æ³•ä¼ äººdmpæ–‡ä»¶ä¿å­˜çš„è·¯å¾„</span></span><br><span class="line"><span class="function">JNIEXPORT <span class="keyword">void</span> JNICALL <span class="title">Java_com_test_crash_TestCrash_initial</span><span class="params">(JNIEnv* env, jobject obj, jstring filepath)</span> </span>&#123;</span><br><span class="line">    LOGE(<span class="string">"The Momo native crash initial."</span>);</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span> *path = env-&gt;GetStringUTFChars(filepath, <span class="number">0</span>);</span><br><span class="line">    google_breakpad::<span class="function">MinidumpDescriptor <span class="title">descriptor</span><span class="params">(path)</span></span>;</span><br><span class="line">    exceptionHandler = new google_breakpad::ExceptionHandler(descriptor, NULL, DumpCallback, NULL,</span><br><span class="line">            true, <span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// native crash æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="function">JNIEXPORT <span class="keyword">void</span> JNICALL <span class="title">Java_com_test_crash_TestCrash_crash</span><span class="params">(JNIEnv *,</span><br><span class="line">        jobject)</span> </span>&#123;</span><br><span class="line">    LOGE(<span class="string">"The test native crash."</span>);</span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span>* a = (int*)(NULL);</span><br><span class="line">    *a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h4 id="ç¼–è¯‘C-ä»£ç æˆ-soæ–‡ä»¶ï¼ˆæ­¥éª¤ç•¥ï¼‰ï¼Œé€šè¿‡åŠ è½½libbreakpad-client-soï¼Œè°ƒç”¨initial-åˆå§‹åŒ–ä¹‹åï¼Œå°±å¼€å§‹å´©æºƒæ•è·ã€‚"><a href="#ç¼–è¯‘C-ä»£ç æˆ-soæ–‡ä»¶ï¼ˆæ­¥éª¤ç•¥ï¼‰ï¼Œé€šè¿‡åŠ è½½libbreakpad-client-soï¼Œè°ƒç”¨initial-åˆå§‹åŒ–ä¹‹åï¼Œå°±å¼€å§‹å´©æºƒæ•è·ã€‚" class="headerlink" title="ç¼–è¯‘C++ä»£ç æˆ.soæ–‡ä»¶ï¼ˆæ­¥éª¤ç•¥ï¼‰ï¼Œé€šè¿‡åŠ è½½libbreakpad_client.soï¼Œè°ƒç”¨initial()åˆå§‹åŒ–ä¹‹åï¼Œå°±å¼€å§‹å´©æºƒæ•è·ã€‚"></a>ç¼–è¯‘C++ä»£ç æˆ.soæ–‡ä»¶ï¼ˆæ­¥éª¤ç•¥ï¼‰ï¼Œé€šè¿‡åŠ è½½libbreakpad_client.soï¼Œè°ƒç”¨initial()åˆå§‹åŒ–ä¹‹åï¼Œå°±å¼€å§‹å´©æºƒæ•è·ã€‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCrash</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åŠ è½½åŠ¨æ€é“¾æ¥åº“(åŠ è½½.soæœ€å¥½æ”¾åœ¨applicationä¸­)</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.loadLibrary(<span class="string">"breakpad_client"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Error e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">initial</span><span class="params">(String filePath)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// native crashæµ‹è¯•ä»£ç æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">crash</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="è§£æç”Ÿæˆçš„dmpæ–‡ä»¶ï¼š"><a href="#è§£æç”Ÿæˆçš„dmpæ–‡ä»¶ï¼š" class="headerlink" title="è§£æç”Ÿæˆçš„dmpæ–‡ä»¶ï¼š"></a>è§£æç”Ÿæˆçš„dmpæ–‡ä»¶ï¼š</h4><ul>
<li>å›åˆ°ubuntuç¯å¢ƒï¼Œå»ºç«‹ä¸€ä¸ªDumpç›®å½•ï¼š</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir Dump</span><br></pre></td></tr></table></figure>
<p>åˆ†åˆ«å°†ç”Ÿæˆçš„.dmpæ–‡ä»¶ã€minidump_stackwalkã€dump_symsã€androidé¡¹ç›®ä¸‹çš„obj/local/armeabi/libxxx.soåº“æ‹·è´åˆ°Dumpç›®å½•ã€‚</p>
<ul>
<li><p>ç‰¹åˆ«è¯´æ˜ï¼šlibxxx.soæ–‡ä»¶å¿…é¡»æ˜¯obj/local/armeabi/ æ–‡ä»¶å¤¹ä¸‹çš„ï¼Œè¿™ä¸ªé‡Œé¢soæ–‡ä»¶åŒ…å«äº†debugä¿¡æ¯ï¼Œç›¸å¯¹libä¸‹çš„soæ–‡ä»¶æ¥è¯´ä½“ç§¯å¾ˆå¤§ï¼Œæœ‰å¯èƒ½ä¸Šç™¾å…†ã€‚</p>
</li>
<li><p>åˆ›å»ºå¥½çš„Dumpæ–‡ä»¶å¤¹è·¯å¾„åœ¨â€œä¸ªäºº â€”&gt; ubuntu â€”&gt; Dumpâ€ï¼›</p>
</li>
</ul>
<h4 id="æ‰§è¡Œç”Ÿæˆç¬¦å·æ–‡ä»¶å‘½ä»¤ï¼š"><a href="#æ‰§è¡Œç”Ÿæˆç¬¦å·æ–‡ä»¶å‘½ä»¤ï¼š" class="headerlink" title="æ‰§è¡Œç”Ÿæˆç¬¦å·æ–‡ä»¶å‘½ä»¤ï¼š"></a>æ‰§è¡Œç”Ÿæˆç¬¦å·æ–‡ä»¶å‘½ä»¤ï¼š</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /Dump  </span><br><span class="line">$ dump_syms libxxx.so &gt; libxxx.so.sym</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥çœ‹libxxx.so.symæ–‡ä»¶å†…å®¹ï¼Œå¤´éƒ¨ä¼šæœ‰ï¼Œ<code>BB0351B14DDA42A6D36FA6EA358B49D50</code> è¿™æ ·çš„å­—ç¬¦ä¸²ï¼š</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ head -n1 libxxx.so.sym</span><br><span class="line">MODULE Linux arm BB0351B14DDA42A6D36FA6EA358B49D50 libxxx.so</span><br></pre></td></tr></table></figure>
<h4 id="ç»§ç»­æ‰§è¡Œå‘½ä»¤ï¼š"><a href="#ç»§ç»­æ‰§è¡Œå‘½ä»¤ï¼š" class="headerlink" title="ç»§ç»­æ‰§è¡Œå‘½ä»¤ï¼š"></a>ç»§ç»­æ‰§è¡Œå‘½ä»¤ï¼š</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p symbols/libxxx.so/BB0351B14DDA42A6D36FA6EA358B49D50/  </span><br><span class="line">$ mv libxxx.so.sym symbols/libxxx.so/BB0351B14DDA42A6D36FA6EA358B49D50/</span><br></pre></td></tr></table></figure>
<ul>
<li>å¯¼å‡ºå´©æºƒå †æ ˆä¿¡æ¯æ–‡ä»¶( ç¡®ä¿.dmpæ–‡ä»¶å’Œ symbolsç›®å½•æ˜¯åŒçº§çš„ )ï¼š</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./minidump_stackwalk filename.dmp symbols &gt; crashed.<span class="built_in">log</span></span><br></pre></td></tr></table></figure>
<h3 id="æ‰“å¼€-crashed-log-æ–‡ä»¶ï¼š"><a href="#æ‰“å¼€-crashed-log-æ–‡ä»¶ï¼š" class="headerlink" title="æ‰“å¼€ crashed.log æ–‡ä»¶ï¼š"></a>æ‰“å¼€ crashed.log æ–‡ä»¶ï¼š</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Thread <span class="number">0</span> (crashed)</span><br><span class="line"> <span class="number">0</span>  libxxx.so!Java_com_test_crash_TestCrash [TestCrash.cpp : <span class="number">68</span> + <span class="number">0x8</span>]</span><br><span class="line">     r0 = <span class="number">0x00000027</span>    r1 = <span class="number">0xc3dab5eb</span>    r2 = <span class="number">0x00000001</span>    r3 = <span class="number">0x00000000</span></span><br><span class="line">     r4 = <span class="number">0x0000026a</span>    r5 = <span class="number">0x12f99f20</span>    r6 = <span class="number">0x12d63e00</span>    r7 = <span class="number">0x75c4a1b0</span></span><br><span class="line">     r8 = <span class="number">0x1302b9e0</span>    r9 = <span class="number">0xb4f07800</span>   r10 = <span class="number">0x0000003a</span>   r12 = <span class="number">0xb6e98929</span></span><br><span class="line">     fp = <span class="number">0x0000003a</span>    sp = <span class="number">0xbebb8f58</span>    lr = <span class="number">0xa289aafc</span>    pc = <span class="number">0xa289ab04</span></span><br></pre></td></tr></table></figure>
<ul>
<li>[TestCrash.cpp : 68 + 0x8]ï¼šå®šä½åˆ°TestCrash.cppçš„ ç¬¬68è¡Œï¼Œä»å·¦åˆ°å³ç¬¬8ä¸ªå­—ç¬¦ ï¼Œäº§ç”Ÿçš„å´©æºƒã€‚<h3 id="å¦‚æœæ²¡æœ‰ç”Ÿæˆç¬¦å·æ–‡ä»¶ï¼Œåˆ™-crashed-log-æ–‡ä»¶ä¸­çš„ä¿¡æ¯å¦‚ä¸‹ï¼š"><a href="#å¦‚æœæ²¡æœ‰ç”Ÿæˆç¬¦å·æ–‡ä»¶ï¼Œåˆ™-crashed-log-æ–‡ä»¶ä¸­çš„ä¿¡æ¯å¦‚ä¸‹ï¼š" class="headerlink" title="å¦‚æœæ²¡æœ‰ç”Ÿæˆç¬¦å·æ–‡ä»¶ï¼Œåˆ™ crashed.log æ–‡ä»¶ä¸­çš„ä¿¡æ¯å¦‚ä¸‹ï¼š"></a>å¦‚æœæ²¡æœ‰ç”Ÿæˆç¬¦å·æ–‡ä»¶ï¼Œåˆ™ crashed.log æ–‡ä»¶ä¸­çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</h3></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> Thread <span class="number">0</span> (crashed) </span><br><span class="line"> <span class="number">0</span>  libxxx.so + <span class="number">0xa289ab04</span> </span><br><span class="line">     r0 = <span class="number">0x00000027</span>    r1 = <span class="number">0xc3dab5eb</span>    r2 = <span class="number">0x00000001</span>    r3 = <span class="number">0x00000000</span> </span><br><span class="line">     r4 = <span class="number">0x0000026a</span>    r5 = <span class="number">0x12f99f20</span>    r6 = <span class="number">0x12d63e00</span>    r7 = <span class="number">0x75c4a1b0</span> </span><br><span class="line">     r8 = <span class="number">0x1302b9e0</span>    r9 = <span class="number">0xb4f07800</span>   r10 = <span class="number">0x0000003a</span>   r12 = <span class="number">0xb6e98929</span> </span><br><span class="line">     fp = <span class="number">0x0000003a</span>    sp = <span class="number">0xbebb8f58</span>    lr = <span class="number">0xa289aafc</span>    pc = <span class="number">0xa289ab04</span></span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">* é€šè¿‡ä¸Šé¢çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬æ²¡åŠæ³•ç›´è§‚çš„çœ‹å‡ºå“ªé‡Œå¯¼è‡´çš„å´©æºƒï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨NDKä¸­çš„`arm-linux-androideabi-addr2line` å·¥å…·å®šä½å´©æºƒï¼›</span><br><span class="line">* `arm-linux-androideabi-addr2line` è·¯å¾„ä¸ºï¼š`$NDK_ROOT/toolchains/arm-linux-androideabi<span class="number">-4.8</span>/prebuilt/darwin-x86/bin/arm-linux-androideabi-addr2line`</span><br><span class="line">* usage: `arm-linux-androideabi-addr2line -C -f -e &lt;åº“è·¯å¾„&gt; &lt;å†…å­˜åœ°å€&gt;`</span><br><span class="line"></span><br><span class="line">``` C++</span><br><span class="line">arm-linux-androideabi-addr2line -C -f -e project/test/obj/local/armeabi/libxxx.so <span class="number">0xa289ab04</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™æ—¶å€™å°±å¯ä»¥åœ¨ç»ˆç«¯ä¸­çœ‹åˆ°æ˜¯ libxxx.so ä¸­çš„å“ªä¸ªæ–‡ä»¶çš„é‚£ä¸€è¡Œå‘ç”Ÿå¼‚å¸¸äº†ï¼Œæ¥ä¸‹æ¥å¯ä»¥ä½¿ç”¨æ—¥å¿—è¿½è¸ªæœ‰é—®é¢˜çš„ä»£ç äº†ã€‚</li>
</ul>
<hr>
<ul>
<li>å‚è€ƒï¼š<a href="http://blog.linguofeng.com/archive/2014/04/02/google-breakpad-android.html" target="_blank" rel="external">http://blog.linguofeng.com/archive/2014/04/02/google-breakpad-android.html</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[OS Xä¸‹ä½¿ç”¨vagrantå®‰è£…ubuntuç¯å¢ƒ]]></title>
      <url>http://kippies.cn/2016/07/10/OS-X%E4%B8%8B%E4%BD%BF%E7%94%A8vagrant%E5%AE%89%E8%A3%85ubuntu%E7%8E%AF%E5%A2%83/</url>
      <content type="html"><![CDATA[<h4 id="å®‰è£…brewå‘½ä»¤å·¥å…·"><a href="#å®‰è£…brewå‘½ä»¤å·¥å…·" class="headerlink" title="å®‰è£…brewå‘½ä»¤å·¥å…·"></a>å®‰è£…brewå‘½ä»¤å·¥å…·</h4><pre><code>* githubï¼šhttps://github.com/phinze/homebrew-cask
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"</span><br><span class="line">``` </span><br><span class="line">#### å®‰è£… wget å‘½ä»¤å·¥å…·</span><br><span class="line"></span><br><span class="line">	æŸ¥çœ‹è¦å®‰è£…çš„ç‰ˆæœ¬ http://ftp.gnu.org/gnu/wget/</span><br><span class="line"></span><br><span class="line">#### ä¸‹è½½ wget</span><br><span class="line"></span><br><span class="line">``` java</span><br><span class="line">$ cd ~/Downloads  </span><br><span class="line">$ curl -O http://ftp.gnu.org/gnu/wget/wget-1.15.tar.gz</span><br></pre></td></tr></table></figure>
<h4 id="è§£å‹-wget"><a href="#è§£å‹-wget" class="headerlink" title="è§£å‹ wget"></a>è§£å‹ wget</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zxvf wget-<span class="number">1.15</span>.tar.gz</span><br></pre></td></tr></table></figure>
<h4 id="ç¼–è¯‘å’Œå®‰è£…"><a href="#ç¼–è¯‘å’Œå®‰è£…" class="headerlink" title="ç¼–è¯‘å’Œå®‰è£…"></a>ç¼–è¯‘å’Œå®‰è£…</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cd wget-<span class="number">1.15</span>/  </span><br><span class="line">$ ./configure --with-ssl=openssl  </span><br><span class="line">$ make  </span><br><span class="line">$ sudo make install</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="æ¸…ç†æºæ–‡ä»¶"><a href="#æ¸…ç†æºæ–‡ä»¶" class="headerlink" title="æ¸…ç†æºæ–‡ä»¶"></a>æ¸…ç†æºæ–‡ä»¶</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm -rf ~/Downloads/wget*</span><br></pre></td></tr></table></figure>
<h4 id="ä½¿ç”¨vagrantå®‰è£…ubuntuç¯å¢ƒ"><a href="#ä½¿ç”¨vagrantå®‰è£…ubuntuç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨vagrantå®‰è£…ubuntuç¯å¢ƒ"></a>ä½¿ç”¨vagrantå®‰è£…ubuntuç¯å¢ƒ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew tap phinze/cask  </span><br><span class="line">$ brew install brew-cask</span><br></pre></td></tr></table></figure>
<h4 id="å®‰è£…vagrantä¸virtualbox"><a href="#å®‰è£…vagrantä¸virtualbox" class="headerlink" title="å®‰è£…vagrantä¸virtualbox"></a>å®‰è£…vagrantä¸virtualbox</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew cask install vagrant  </span><br><span class="line">$ brew cask install virtualbox</span><br></pre></td></tr></table></figure>
<h4 id="ä¸‹è½½ubuntuçš„box"><a href="#ä¸‹è½½ubuntuçš„box" class="headerlink" title="ä¸‹è½½ubuntuçš„box"></a>ä¸‹è½½ubuntuçš„box</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir ubuntu  </span><br><span class="line">$ cd ubuntu  </span><br><span class="line">$ wget http:<span class="comment">//files.vagrantup.com/precise32.box</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆ›å»ºä¸åˆå§‹åŒ–ubuntu-box"><a href="#åˆ›å»ºä¸åˆå§‹åŒ–ubuntu-box" class="headerlink" title="åˆ›å»ºä¸åˆå§‹åŒ–ubuntu box"></a>åˆ›å»ºä¸åˆå§‹åŒ–ubuntu box</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant box add ubuntu ./precise32.box  </span><br><span class="line">$ vagrant init ubuntu</span><br></pre></td></tr></table></figure>
<h4 id="æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨sshç™»å½•äº†"><a href="#æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨sshç™»å½•äº†" class="headerlink" title="æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨sshç™»å½•äº†"></a>æ¥ä¸‹æ¥å°±å¯ä»¥ä½¿ç”¨sshç™»å½•äº†</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vagrant up  </span><br><span class="line">$ vagrant ssh</span><br></pre></td></tr></table></figure>
<h4 id="è¿›å…¥ubuntuç›®å½•"><a href="#è¿›å…¥ubuntuç›®å½•" class="headerlink" title="è¿›å…¥ubuntuç›®å½•"></a>è¿›å…¥ubuntuç›®å½•</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /vagrant/ubuntu</span><br></pre></td></tr></table></figure>
<h4 id="æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨linuxç¯å¢ƒä¸‹è¿›è¡Œç¼–è¯‘äº†ã€‚"><a href="#æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨linuxç¯å¢ƒä¸‹è¿›è¡Œç¼–è¯‘äº†ã€‚" class="headerlink" title="æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨linuxç¯å¢ƒä¸‹è¿›è¡Œç¼–è¯‘äº†ã€‚"></a>æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨linuxç¯å¢ƒä¸‹è¿›è¡Œç¼–è¯‘äº†ã€‚</h4><ul>
<li>å‚è€ƒï¼š<a href="http://segmentfault.com/a/1190000000264347" target="_blank" rel="external">http://segmentfault.com/a/1190000000264347</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Androidè¾“å…¥æ¡†EditiTextç¦æ­¢è¾“å…¥Emojiè¡¨æƒ…ç¬¦]]></title>
      <url>http://kippies.cn/2016/07/10/Android%E8%BE%93%E5%85%A5%E6%A1%86EditiText%E7%A6%81%E6%AD%A2%E8%BE%93%E5%85%A5Emoji%E8%A1%A8%E6%83%85%E7%AC%A6/</url>
      <content type="html"><![CDATA[<ol>
<li><p>é€šè¿‡æ·»åŠ EditTextçš„addTextChangedListener()ç›‘å¬æ¥è¿‡æ»¤Emojiè¡¨æƒ…ï¼š</p>
<ul>
<li>onTextChanged()</li>
<li>beforeTextChanged()</li>
</ul>
</li>
<li><p>ä½¿ç”¨æ–¹æ³•</p>
<ul>
<li>åœ¨å¼€å‘ä¸­å¯èƒ½å¤šå¤„ä¼šç”¨åˆ°è¿‡æ»¤Emojiè¡¨æƒ…ç¬¦ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨è‡ªå®šä¹‰EditTextæ¥å®ç°ï¼š</li>
</ul>
</li>
</ol>
<p><img src="http://img.blog.csdn.net/20150430101855832" alt="è¾“å…¥"><br><img src="http://img.blog.csdn.net/20150430101911416" alt="ç»“æœ"></p>
<a id="more"></a>
<p>ä»¥ä¸‹æ˜¯ä½™ä¸‹å…¨æ–‡</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.liujy.ui.wiget;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context;</span><br><span class="line"><span class="keyword">import</span> android.text.Editable;</span><br><span class="line"><span class="keyword">import</span> android.text.Selection;</span><br><span class="line"><span class="keyword">import</span> android.text.Spannable;</span><br><span class="line"><span class="keyword">import</span> android.text.TextWatcher;</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet;</span><br><span class="line"><span class="keyword">import</span> android.widget.EditText;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContainsEmojiEditText</span> <span class="keyword">extends</span> <span class="title">EditText</span> </span>&#123;</span><br><span class="line">    <span class="comment">//è¾“å…¥è¡¨æƒ…å‰çš„å…‰æ ‡ä½ç½®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> cursorPos;</span><br><span class="line">    <span class="comment">//è¾“å…¥è¡¨æƒ…å‰EditTextä¸­çš„æ–‡æœ¬</span></span><br><span class="line">    <span class="keyword">private</span> String inputAfterText;</span><br><span class="line">    <span class="comment">//æ˜¯å¦é‡ç½®äº†EditTextçš„å†…å®¹</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> resetText;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Context mContext;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ContainsEmojiEditText</span><span class="params">(Context context)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context);</span><br><span class="line">        <span class="keyword">this</span>.mContext = context;</span><br><span class="line">        initEditText();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ContainsEmojiEditText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs);</span><br><span class="line">        <span class="keyword">this</span>.mContext = context;</span><br><span class="line">        initEditText();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ContainsEmojiEditText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(context, attrs, defStyleAttr);</span><br><span class="line">        <span class="keyword">this</span>.mContext = context;</span><br><span class="line">        initEditText();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–edittext æ§ä»¶</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initEditText</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        addTextChangedListener(<span class="keyword">new</span> TextWatcher() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> before, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!resetText) &#123;</span><br><span class="line">                    cursorPos = getSelectionEnd();</span><br><span class="line">                    <span class="comment">// è¿™é‡Œç”¨s.toString()è€Œä¸ç›´æ¥ç”¨sæ˜¯å› ä¸ºå¦‚æœç”¨sï¼Œ</span></span><br><span class="line">                    <span class="comment">// é‚£ä¹ˆï¼ŒinputAfterTextå’Œsåœ¨å†…å­˜ä¸­æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œsæ”¹å˜äº†ï¼Œ</span></span><br><span class="line">                    <span class="comment">// inputAfterTextä¹Ÿå°±æ”¹å˜äº†ï¼Œé‚£ä¹ˆè¡¨æƒ…è¿‡æ»¤å°±å¤±è´¥äº†</span></span><br><span class="line">                    inputAfterText= s.toString();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onTextChanged</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> before, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (!resetText) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (count &gt;= <span class="number">2</span>) &#123;<span class="comment">//è¡¨æƒ…ç¬¦å·çš„å­—ç¬¦é•¿åº¦æœ€å°ä¸º2</span></span><br><span class="line">                        CharSequence input = s.subSequence(cursorPos, cursorPos + count);</span><br><span class="line">                        <span class="keyword">if</span> (containsEmoji(input.toString())) &#123;</span><br><span class="line">                            resetText = <span class="keyword">true</span>;</span><br><span class="line">                            Toast.makeText(mContext, <span class="string">"ä¸æ”¯æŒè¾“å…¥Emojiè¡¨æƒ…ç¬¦å·"</span>, Toast.LENGTH_SHORT).show();</span><br><span class="line">                            <span class="comment">//æ˜¯è¡¨æƒ…ç¬¦å·å°±å°†æ–‡æœ¬è¿˜åŸä¸ºè¾“å…¥è¡¨æƒ…ç¬¦å·ä¹‹å‰çš„å†…å®¹</span></span><br><span class="line">                            setText(inputAfterText);</span><br><span class="line">                            CharSequence text = getText();</span><br><span class="line">                            <span class="keyword">if</span> (text <span class="keyword">instanceof</span> Spannable) &#123;</span><br><span class="line">                                Spannable spanText = (Spannable) text;</span><br><span class="line">                                Selection.setSelection(spanText, text.length());</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    resetText = <span class="keyword">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterTextChanged</span><span class="params">(Editable editable)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * æ£€æµ‹æ˜¯å¦æœ‰emojiè¡¨æƒ…</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> source</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">containsEmoji</span><span class="params">(String source)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> len = source.length();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">char</span> codePoint = source.charAt(i);</span><br><span class="line">            <span class="keyword">if</span> (!isEmojiCharacter(codePoint)) &#123; <span class="comment">//å¦‚æœä¸èƒ½åŒ¹é…,åˆ™è¯¥å­—ç¬¦æ˜¯Emojiè¡¨æƒ…</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * åˆ¤æ–­æ˜¯å¦æ˜¯Emoji</span><br><span class="line">     *</span><br><span class="line">     * <span class="doctag">@param</span> codePoint æ¯”è¾ƒçš„å•ä¸ªå­—ç¬¦</span><br><span class="line">     * <span class="doctag">@return</span></span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isEmojiCharacter</span><span class="params">(<span class="keyword">char</span> codePoint)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (codePoint == <span class="number">0x0</span>) || (codePoint == <span class="number">0x9</span>) || (codePoint == <span class="number">0xA</span>) ||</span><br><span class="line">                (codePoint == <span class="number">0xD</span>) || ((codePoint &gt;= <span class="number">0x20</span>) &amp;&amp; (codePoint &lt;= <span class="number">0xD7FF</span>)) ||</span><br><span class="line">                ((codePoint &gt;= <span class="number">0xE000</span>) &amp;&amp; (codePoint &lt;= <span class="number">0xFFFD</span>)) || ((codePoint &gt;= <span class="number">0x10000</span>)</span><br><span class="line">                &amp;&amp; (codePoint &lt;= <span class="number">0x10FFFF</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>xmlä½¿ç”¨æ–¹æ³•</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">com.liujy.ui.wiget.ContainsEmojiEditText</span></span><br><span class="line">      <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span><br><span class="line">      <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Android åˆ¤æ–­ç¨‹åºæ˜¯å¦åœ¨å‰å°è¿è¡Œ]]></title>
      <url>http://kippies.cn/2016/07/10/Android%20%E5%88%A4%E6%96%AD%E7%A8%8B%E5%BA%8F%E6%98%AF%E5%90%A6%E5%9C%A8%E5%89%8D%E5%8F%B0%E8%BF%90%E8%A1%8C/</url>
      <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isTopActivity</span><span class="params">(Activity activity)</span> </span>&#123;  </span><br><span class="line">        String packageName = <span class="string">"com.liujy.android.test"</span>;  </span><br><span class="line">        ActivityManager activityManager = (ActivityManager) activity  </span><br><span class="line">                .getSystemService(Context.ACTIVITY_SERVICE);  </span><br><span class="line">        List&lt;RunningTaskInfo&gt; tasksInfo = activityManager.getRunningTasks(<span class="number">1</span>);  </span><br><span class="line">        <span class="keyword">if</span> (tasksInfo.size() &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">            <span class="comment">// åº”ç”¨ç¨‹åºä½äºå †æ ˆçš„é¡¶å±‚  </span></span><br><span class="line">            <span class="keyword">if</span> (packageName.equals(tasksInfo.get(<span class="number">0</span>).topActivity.getPackageName())) &#123;  </span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[çƒ­æ›´æ–°-Androidä¸Luaç›¸äº’é€šä¿¡]]></title>
      <url>http://kippies.cn/2016/07/08/%E7%83%AD%E6%9B%B4%E6%96%B0-Android%E4%B8%8ELua%E7%9B%B8%E4%BA%92%E9%80%9A%E4%BF%A1/</url>
      <content type="html"><![CDATA[<h3 id="çƒ­æ›´æ–°ä»‹ç»"><a href="#çƒ­æ›´æ–°ä»‹ç»" class="headerlink" title="çƒ­æ›´æ–°ä»‹ç»"></a>çƒ­æ›´æ–°ä»‹ç»</h3><ul>
<li>ä»€ä¹ˆæ˜¯çƒ­æ›´æ–°ï¼Ÿ</li>
</ul>
<p><code>å®¢æˆ·ç«¯å¯åŠ¨æ—¶ï¼Œä¸»åŠ¨è¯·æ±‚æœåŠ¡ç«¯æ£€æŸ¥ç‰ˆæœ¬å·ï¼Œå¹¶æ›´æ–°èµ„æºåˆ°æœ¬åœ°ã€‚</code></p>
<ul>
<li>åº”ç”¨åœºæ™¯ï¼š<ul>
<li>æƒ…å†µä¸€ï¼šå®¢æˆ·ç«¯å·²ç»å‘å¸ƒäº†ï¼Œä½†çªç„¶å‘ç°æœ‰ä¸ªæ¯”è¾ƒä¸¥é‡çš„bugéœ€è¦ä¿®å¤ã€‚è¿™æ—¶éœ€è¦æ›´æ–°å®¢æˆ·ç«¯çš„ä»£ç ï¼ˆLuaä»£ç ï¼‰ã€‚</li>
<li>æƒ…å†µäºŒï¼šæƒ…äººèŠ‚åˆ°äº†ï¼Œéœ€è¦æä¸ªæ´»åŠ¨ï¼Œåœ¨å®¢æˆ·ç«¯ä¸­è¥é€ ä¸€ä¸ªèŠ‚æ—¥æ°›å›´ã€‚è¿™æ—¶ï¼Œéœ€è¦æ›´æ–°å®¢æˆ·ç«¯èµ„æºæˆ–å¢åŠ ä¸€äº›åŠŸèƒ½ã€‚</li>
</ul>
</li>
<li>å¥½å¤„ï¼š<br><code>ä¸éœ€è¦é‡æ–°æ‰“åŒ…å’Œæäº¤åº”ç”¨åˆ°å¸‚åœºç­‰å¾…å®¡æ ¸ã€‚</code></li>
</ul>
<h3 id="Androidä¸Luaç›¸äº’é€šä¿¡"><a href="#Androidä¸Luaç›¸äº’é€šä¿¡" class="headerlink" title="Androidä¸Luaç›¸äº’é€šä¿¡"></a>Androidä¸Luaç›¸äº’é€šä¿¡</h3><ul>
<li><p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="http://manual.luaer.cn/" target="_blank" rel="external">Lua 5.1 åœ¨çº¿å‚è€ƒæ‰‹å†Œ</a></li>
<li><a href="https://github.com/mkottman/AndroLua" target="_blank" rel="external">å¼€æºé¡¹ç›®LuaJava</a></li>
</ul>
</li>
</ul>
<a id="more"></a>
<h3 id="åœ¨Androidé¡¹ç›®ä¸­ä½¿ç”¨Luaï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤"><a href="#åœ¨Androidé¡¹ç›®ä¸­ä½¿ç”¨Luaï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤" class="headerlink" title="åœ¨Androidé¡¹ç›®ä¸­ä½¿ç”¨Luaï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤"></a>åœ¨Androidé¡¹ç›®ä¸­ä½¿ç”¨Luaï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤</h3><ol>
<li>åŠ è½½Luaè„šæœ¬è§£æå¼•æ“</li>
<li>ä»¥Native APIæ–¹å¼è°ƒç”¨å¼•æ“æ¥å£</li>
</ol>
<ul>
<li>ç›´æ¥ä»¥JNIæ–¹å¼è°ƒç”¨Luaè§£æå¼•æ“çš„æ¥å£ååˆ†éº»çƒ¦ï¼Œå¼€æºé¡¹ç›®<a href="https://github.com/mkottman/AndroLua" target="_blank" rel="external">LuaJava</a>å¯¹è¿™äº›JNIæ¥å£è¿›è¡Œäº†å¾ˆå¥½çš„å°è£…ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«äº†LuaJavaçš„Androidå¹³å°çš„Luaè§£æå™¨ï¼Œå®ƒæä¾›ä¸€ç³»åˆ—æ˜ å°„åˆ°Lua Cå®ç°å‡½æ•°çš„Javaæ¥å£ã€‚</li>
</ul>
<h3 id="éœ€æ³¨æ„çš„åœ°æ–¹"><a href="#éœ€æ³¨æ„çš„åœ°æ–¹" class="headerlink" title="éœ€æ³¨æ„çš„åœ°æ–¹"></a>éœ€æ³¨æ„çš„åœ°æ–¹</h3><ul>
<li>.luaæ–‡ä»¶å¯å­˜æ”¾åœ¨assetsã€rawæ–‡ä»¶å¤¹ï¼›</li>
<li>æä¾›ç»™luaçš„å›è°ƒå¿…é¡»æ˜¯publicï¼Œå¦åˆ™luaè°ƒä¸åˆ°ï¼›</li>
<li>â€œ.â€æ˜¯ç”¨æ¥è°ƒç”¨ç±»çš„æ–¹æ³•æˆ–å˜é‡ï¼ˆé™æ€æ–¹æ³•ï¼‰ï¼Œè€Œâ€œ:â€æ˜¯ç”¨æ¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ã€‚</li>
</ul>
<h3 id="åœ¨Luaä¸­è°ƒç”¨Javaç±»ï¼š"><a href="#åœ¨Luaä¸­è°ƒç”¨Javaç±»ï¼š" class="headerlink" title="åœ¨Luaä¸­è°ƒç”¨Javaç±»ï¼š"></a>åœ¨Luaä¸­è°ƒç”¨Javaç±»ï¼š</h3><ul>
<li>newInstance(className, â€¦) // å¯ä»¥æ ¹æ®ç±»ååˆ›å»ºä¸€ä¸ªJavaç±»ï¼ŒåŒæ—¶è¿”å›ä¸€ä¸ªluaå˜é‡ä¸Javaç±»å¯¹åº”</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å¯åŠ¨æ‰‹æœºè®¾ç½®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">launchSetting</span><span class="params">(context)</span></span></span><br><span class="line">  <span class="comment">-- å¾—åˆ°Intentç±»çš„å®ä¾‹</span></span><br><span class="line">  intent = luajava.newInstance(<span class="string">"android.content.Intent"</span>)</span><br><span class="line">  c = luajava.newInstance(<span class="string">"android.content.ComponentName"</span>,<span class="string">"com.android.settings"</span>, <span class="string">"com.android.settings.Settings"</span>)</span><br><span class="line">  <span class="comment">-- intent:ç”¨æ¥è°ƒç”¨å¯¹è±¡çš„æ–¹æ³• </span></span><br><span class="line">  <span class="comment">-- intent.ç”¨æ¥è°ƒç”¨ç±»çš„æ–¹æ³•æˆ–å˜é‡ï¼ˆé™æ€æ–¹æ³•ï¼‰</span></span><br><span class="line">  intent:setFlags(intent.FLAG_ACTIVITY_NEW_TASK);</span><br><span class="line">  intent:setComponent(c)</span><br><span class="line">  context:startActivity(intent)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>bindClass(className) // å¯ä»¥è®©luaä¸­çš„å˜é‡å¯¹åº”ä¸€ä¸ªJavaçš„ç±»ï¼ˆæ˜¯ç±»ï¼Œä¸æ˜¯å®ä¾‹ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨luaçš„è¿™ä¸ªå˜é‡åˆ›å»ºå®ä¾‹ä»¥åŠè°ƒç”¨é™æ€ç±»</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span> <span class="string">'import'</span></span><br><span class="line">button_cb = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">button_cb.onClick</span><span class="params">(ev)</span></span></span><br><span class="line">  <span class="built_in">print</span>(<span class="string">'hello,world'</span>)</span><br><span class="line">  launchSetting(activity)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">--[=[ å› ä¸ºidæ˜¯R.javaé‡Œçš„ä¸€ä¸ªé™æ€ç±»ï¼Œæ‰€ä»¥å¼•ç”¨Buttonçš„èµ„æºæ–‡ä»¶ç”¨ä¸‹é¢çš„ä»£ç ï¼š</span><br><span class="line">   id.launchButtonï¼Œè€Œä¸æ˜¯id:launchButton ]=]</span></span><br><span class="line"><span class="keyword">local</span> id = luajava.bindClass(<span class="string">"sk.kottman.androlua.R$id"</span>)</span><br><span class="line"><span class="keyword">local</span> launch = activity:findViewById(id.launchButton)</span><br><span class="line"><span class="comment">-- å¦å¤–ï¼Œæ³¨æ„ç±»ä¸­ç±»çš„å¼•ç”¨æ–¹æ³•ï¼Œå¦‚ï¼šandroid.view.View$OnClickListener</span></span><br><span class="line">buttonProxy = luajava.createProxy(<span class="string">"android.view.View$OnClickListener"</span>, button_cb)</span><br><span class="line">launch:setOnClickListener(buttonProxy)</span><br></pre></td></tr></table></figure>
<h3 id="åœ¨javaä¸­è°ƒç”¨Luaï¼š"><a href="#åœ¨javaä¸­è°ƒç”¨Luaï¼š" class="headerlink" title="åœ¨javaä¸­è°ƒç”¨Luaï¼š"></a>åœ¨javaä¸­è°ƒç”¨Luaï¼š</h3><ul>
<li>LuaState mLuaState = LuaStateFactory.newLuaState(); // Luaè§£æå’Œæ‰§è¡Œç”±æ­¤å¯¹è±¡å®Œæˆ</li>
<li>mLuaState.openLibs();</li>
<li>è°ƒç”¨Luaè„šæœ¬è¯­å¥ï¼š</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">executeLuaStatemanet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mLuaState.LdoString(<span class="string">" varSay = 'call from android : This is string in lua script statement.'"</span>);<span class="comment">// å®šä¹‰ä¸€ä¸ªLuaå˜é‡</span></span><br><span class="line">    mLuaState.getGlobal(<span class="string">"varSay"</span>);<span class="comment">// è·å–</span></span><br><span class="line">    displayResult1.setText(mLuaState.toString(-<span class="number">1</span>));<span class="comment">// è¾“å‡º</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨Luaè„šæœ¬æ–‡ä»¶ï¼š"><a href="#è°ƒç”¨Luaè„šæœ¬æ–‡ä»¶ï¼š" class="headerlink" title="è°ƒç”¨Luaè„šæœ¬æ–‡ä»¶ï¼š"></a>è°ƒç”¨Luaè„šæœ¬æ–‡ä»¶ï¼š</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private void executeLuaFile() &#123;</span><br><span class="line">    mLuaState.LdoString(readStream(getResources().openRawResource(R.raw.luafile)));</span><br><span class="line">    mLuaState.getField(LuaState.LUA_GLOBALSINDEX, <span class="string">"functionInLuaFile"</span>);// æ‰¾åˆ°functionInLuaFileå‡½æ•°</span><br><span class="line">    mLuaState.pushString(<span class="string">"ä»Javaä¸­ä¼ é€’çš„å‚æ•°"</span>);// å°†å‚æ•°å‹å…¥æ ˆ</span><br><span class="line">    // functionInLuaFileå‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸€ä¸ªè¿”å›ç»“æœ</span><br><span class="line">    int paramCount = <span class="number">1</span>;</span><br><span class="line">    int resultCount = <span class="number">1</span>;</span><br><span class="line">    mLuaState.call(paramCount, resultCount);</span><br><span class="line">    mLuaState.setField(LuaState.LUA_GLOBALSINDEX, <span class="string">"resultKey"</span>);// å°†ç»“æœä¿å­˜åˆ°resultKeyä¸­</span><br><span class="line">    mLuaState.getGlobal(<span class="string">"resultKey"</span>);// è·å–</span><br><span class="line">    displayResult2.setText(mLuaState.toString(<span class="number">-1</span>));// è¾“å‡º</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è°ƒç”¨android-APIï¼š"><a href="#è°ƒç”¨android-APIï¼š" class="headerlink" title="è°ƒç”¨android APIï¼š"></a>è°ƒç”¨android APIï¼š</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">callAndroidAPI</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    mLuaState.LdoString(readStream(getResources().openRawResource(R.raw.luafile)));</span><br><span class="line">    mLuaState.getField(LuaState.LUA_GLOBALSINDEX, <span class="string">"callAndroidApi"</span>);<span class="comment">// æ‰¾åˆ°callAndroidApiå‡½æ•°</span></span><br><span class="line">    mLuaState.pushJavaObject(getApplicationContext()); <span class="comment">// ä¸Šä¸‹æ–‡</span></span><br><span class="line">    mLuaState.pushJavaObject(mLayout); <span class="comment">// å¸ƒå±€</span></span><br><span class="line">    mLuaState.pushString(<span class="string">"lua call android Textviewçš„setText()æ–¹æ³•, å†…å®¹æ˜¯:"</span> + (++count)); <span class="comment">// å†…å®¹</span></span><br><span class="line">    mLuaState.call(<span class="number">3</span>, <span class="number">0</span>); <span class="comment">// callAndroidApiå‡½æ•°éœ€è¦ä¼ é€’3ä¸ªå‚æ•°ï¼Œ0ä¸ªè¿”å›å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="rawæ–‡ä»¶ç›®å½•ä¸‹luafile-luaä»£ç ï¼š"><a href="#rawæ–‡ä»¶ç›®å½•ä¸‹luafile-luaä»£ç ï¼š" class="headerlink" title="rawæ–‡ä»¶ç›®å½•ä¸‹luafile.luaä»£ç ï¼š"></a>rawæ–‡ä»¶ç›®å½•ä¸‹luafile.luaä»£ç ï¼š</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- è°ƒç”¨Luaè„šæœ¬æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionInLuaFile</span><span class="params">(key)</span></span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">'call from android: I am in Lua file . Return : '</span>..key..<span class="string">'!'</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è°ƒç”¨android API</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callAndroidApi</span><span class="params">(context,layout,tip)</span></span></span><br><span class="line">    tv = luajava.newInstance(<span class="string">"android.widget.TextView"</span>,context)</span><br><span class="line">    tv:setText(tip)</span><br><span class="line">    layout:addView(tv)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[java è®¡ç®—æ—¶é—´å·®ï¼Œè¿˜å‰©ä¸‹xxå¤©xxå°æ—¶xxåˆ†xxç§’]]></title>
      <url>http://kippies.cn/2016/06/10/java-%E8%AE%A1%E7%AE%97%E6%97%B6%E9%97%B4%E5%B7%AE%EF%BC%8C%E8%BF%98%E5%89%A9%E4%B8%8Bxx%E5%A4%A9xx%E5%B0%8F%E6%97%B6xx%E5%88%86xx%E7%A7%92/</url>
      <content type="html"><![CDATA[<p>è®¡ç®—æ—¶é—´å·®ï¼Œè¿˜å‰©ä¸‹xxå¤©xxå°æ—¶xxåˆ†xxç§’</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Handler handler = <span class="keyword">new</span> Handler();</span><br><span class="line">	    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">	        <span class="meta">@Override</span></span><br><span class="line">	        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	            setDateInfo(NumberUtil.convertTolong(data.getData().getSubmitDate(), System.currentTimeMillis()), orderDateAndNumber);</span><br><span class="line">	            handler.postDelayed(<span class="keyword">this</span>, <span class="number">1000</span>);</span><br><span class="line">	        &#125;</span><br><span class="line">	    &#125;;</span><br><span class="line">	    runnable.run();</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setDateInfo</span><span class="params">(<span class="keyword">long</span> milliseconds, TextView textView)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Date currDate = <span class="keyword">new</span> Date(System.currentTimeMillis());</span><br><span class="line">            Date endDate = <span class="keyword">new</span> Date(milliseconds);</span><br><span class="line">            <span class="keyword">long</span> diff = currDate.getTime() - endDate.getTime(); <span class="comment">// å¾—åˆ°çš„å·®å€¼æ˜¯å¾®ç§’çº§åˆ«ï¼Œå¯ä»¥å¿½ç•¥</span></span><br><span class="line">            <span class="keyword">long</span> days = diff / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);</span><br><span class="line">            <span class="keyword">long</span> hours = (diff - days * (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">long</span> minutes = (diff - days * (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>) - hours * (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>)) / (<span class="number">1000</span> * <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">long</span> seconds = (diff - days * (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>) - hours * (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span>) - minutes * (<span class="number">1000</span> * <span class="number">60</span>)) / (<span class="number">1000</span>);</span><br><span class="line">            textView.setText(<span class="string">"è®¢å•å°†åœ¨"</span></span><br><span class="line">                    + ((<span class="number">2</span> - (days + <span class="number">1</span>)) &lt; <span class="number">0</span> ? <span class="string">"0"</span> : (<span class="number">2</span> - (days + <span class="number">1</span>))) + <span class="string">"å¤©"</span></span><br><span class="line">                    + (<span class="number">24</span> - (hours + <span class="number">1</span>)) + <span class="string">"å°æ—¶"</span></span><br><span class="line">                    + (<span class="number">60</span> - (minutes + <span class="number">1</span>)) + <span class="string">"åˆ†"</span></span><br><span class="line">                    + (<span class="number">60</span> - (seconds + <span class="number">1</span>)) + <span class="string">"ç§’"</span></span><br><span class="line">                    + <span class="string">"è‡ªåŠ¨å…³é—­"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Androidçš„Activityç®¡ç†]]></title>
      <url>http://kippies.cn/2016/05/10/Android%E7%9A%84Activity%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<h4 id="å¯èƒ½ä½ ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼š"><a href="#å¯èƒ½ä½ ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼š" class="headerlink" title="å¯èƒ½ä½ ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼š"></a>å¯èƒ½ä½ ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼š</h4><ol>
<li>ç•Œé¢Aâ€“&gt;ç•Œé¢Bâ€“&gt;â€¦â€“&gt;ç•Œé¢Nï¼Œåœç•™åœ¨ç•Œé¢Nçš„æ—¶å€™ï¼Œæäº¤æ•°æ®ï¼Œæ‰ä¼šæŠŠç•Œé¢Nä¹‹å‰çš„ç•Œé¢Aã€Bâ€¦ finishæ‰ï¼›</li>
<li>ç™»å½•ã€æ³¨å†Œï¼Œæœ€åçš„æäº¤åï¼Œç›´æ¥è¿›å…¥Appä¸»ç•Œé¢ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦æŠŠæ³¨å†Œç•Œé¢finishæ‰ï¼›</li>
<li>ç­‰ç­‰</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedList;  </span><br><span class="line"><span class="keyword">import</span> java.util.List;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">import</span> android.app.Activity;  </span><br><span class="line"><span class="keyword">import</span> android.app.Application;  </span><br><span class="line">  </span><br><span class="line"><span class="comment">/** </span><br><span class="line"> * activityç®¡ç†</span><br><span class="line"> * </span><br><span class="line"> * <span class="doctag">@author</span> Liujy</span><br><span class="line"> */</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KYActivityMannger</span> <span class="keyword">extends</span> <span class="title">Application</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> List&lt;Activity&gt; mList = <span class="keyword">new</span> LinkedList&lt;Activity&gt;();  </span><br><span class="line">    <span class="keyword">private</span> List&lt;Activity&gt; mLogoutList = <span class="keyword">new</span> LinkedList&lt;Activity&gt;();  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> KYActivityMannger instance;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">KYActivityMannger</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> KYActivityMannger <span class="title">getInstance</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == instance) &#123;  </span><br><span class="line">            instance = <span class="keyword">new</span> KYActivityMannger();  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> instance;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/** </span><br><span class="line">     *  add Activity save mList </span><br><span class="line">     * <span class="doctag">@param</span> activity </span><br><span class="line">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addActivity</span><span class="params">(Activity activity)</span> </span>&#123;  </span><br><span class="line">        mList.add(activity);  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/** </span><br><span class="line">     *  add Activity save mLogoutList </span><br><span class="line">     * <span class="doctag">@param</span> activity </span><br><span class="line">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addLogoutActivity</span><span class="params">(Activity activity)</span> </span>&#123;  </span><br><span class="line">        mLogoutList.add(activity);  </span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/** </span><br><span class="line">     * é€€å‡º </span><br><span class="line">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exit</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="keyword">for</span> (Activity activity : mList) &#123;  </span><br><span class="line">                <span class="keyword">if</span> (activity != <span class="keyword">null</span>)  </span><br><span class="line">                    activity.finish();  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">            android.os.Process.killProcess(android.os.Process.myPid());  </span><br><span class="line">            System.exit(<span class="number">0</span>);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">/** </span><br><span class="line">     * æ³¨é”€ </span><br><span class="line">     */</span>  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logout</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">try</span> &#123;  </span><br><span class="line">            <span class="keyword">for</span> (Activity activity : mLogoutList) &#123;  </span><br><span class="line">                <span class="keyword">if</span> (activity != <span class="keyword">null</span>)  </span><br><span class="line">                    activity.finish();  </span><br><span class="line">            &#125;  </span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;  </span><br><span class="line">            e.printStackTrace();  </span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;  </span><br><span class="line">            System.gc();  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onLowMemory</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        <span class="keyword">super</span>.onLowMemory();  </span><br><span class="line">        System.gc();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="åœ¨éœ€è¦å¯¹Activityç®¡ç†çš„onCreate-ï¼‰æ·»åŠ ï¼š"><a href="#åœ¨éœ€è¦å¯¹Activityç®¡ç†çš„onCreate-ï¼‰æ·»åŠ ï¼š" class="headerlink" title="åœ¨éœ€è¦å¯¹Activityç®¡ç†çš„onCreate(ï¼‰æ·»åŠ ï¼š"></a>åœ¨éœ€è¦å¯¹Activityç®¡ç†çš„onCreate(ï¼‰æ·»åŠ ï¼š</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">KYActivityMannger.getInstance().addActivity(<span class="keyword">this</span>);  </span><br><span class="line">KYActivityMannger.getInstance().addLogoutActivity(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<h4 id="è°ƒç”¨"><a href="#è°ƒç”¨" class="headerlink" title="è°ƒç”¨"></a>è°ƒç”¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨é”€ä¸é€€å‡ºApp</span></span><br><span class="line">KYActivityMannger.getInstance().logout();</span><br><span class="line"><span class="comment">// é€€å‡ºå¹¶é€€å‡ºApp</span></span><br><span class="line">KYActivityMannger.getInstance().exit();</span><br></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æœ€æ–°çš„javaæ­£åˆ™è¡¨è¾¾å¼åˆ¤æ–­æ‰‹æœºå·ï¼Œæ”¯æŒè™šæ‹Ÿè¿è¥å•†170å·æ®µ]]></title>
      <url>http://kippies.cn/2016/05/07/%E6%9C%80%E6%96%B0%E7%9A%84-java-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%88%A4%E6%96%AD%E6%89%8B%E6%9C%BA%E5%8F%B7%EF%BC%8C%E6%94%AF%E6%8C%81%E8%99%9A%E6%8B%9F%E8%BF%90%E8%90%A5%E5%95%86170%E5%8F%B7%E6%AE%B5/</url>
      <content type="html"><![CDATA[<p>å›½å®¶å·ç æ®µåˆ†é…å¦‚ä¸‹ï¼š
ã€€ã€€</p>
<ul>
<li>ç§»åŠ¨ï¼š134ã€135ã€136ã€137ã€138ã€139ã€150ã€151ã€157(TD)ã€158ã€159ã€187ã€188ã€182</li>
<li>è”é€šï¼š130ã€131ã€132ã€152ã€155ã€156ã€185ã€186</li>
<li>ç”µä¿¡ï¼š133ã€153ã€180ã€189ã€177ã€ï¼ˆ1349å«é€šï¼‰</li>
<li>è™šæ‹Ÿï¼š170</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Matcher;  </span><br><span class="line"><span class="keyword">import</span> java.util.regex.Pattern;  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassPathResource</span> </span>&#123;  </span><br><span class="line">  </span><br><span class="line">ã€€ã€€<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isMobileNO</span><span class="params">(String mobiles)</span> </span>&#123;  </span><br><span class="line">	ã€€ã€€Pattern p = Pattern.compile(<span class="string">"^((13[0-9])|(15[^4,\\D])|(14[57])|(17[0])|(17[7])|(18[0,0-9]))\\d&#123;8&#125;$"</span>);  </span><br><span class="line">	 	Matcher m = p.matcher(mobiles);  </span><br><span class="line">	 	System.out.println(m.matches()+<span class="string">"---"</span>);  </span><br><span class="line">	  	<span class="keyword">return</span> m.matches();  </span><br><span class="line">ã€€ã€€&#125;  </span><br><span class="line">  </span><br><span class="line">ã€€ã€€<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;  </span><br><span class="line">  </span><br><span class="line">ã€€ã€€    System.out.println(ClassPathResource.isMobileNO(<span class="string">"14738381438"</span>));  </span><br><span class="line">  </span><br><span class="line">ã€€ã€€&#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œæœªç»åšä¸»å…è®¸ä¸å¾—è½¬è½½ã€‚</code></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>http://kippies.cn/2016/05/01/hello-world/</url>
      <content type="html"><![CDATA[<ul>
<li>ä»Šå¤©ï¼Œæ˜¯æˆ‘è¯ç”Ÿçš„æ—¥å­ â€“ 2016.05.01ã€‚</li>
</ul>
]]></content>
    </entry>
    
  
  
</search>
